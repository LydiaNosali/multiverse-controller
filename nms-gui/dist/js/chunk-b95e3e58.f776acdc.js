(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b95e3e58"],{"09ad":function(e,t,s){},4666:function(e,t,s){"use strict";var a=s("832d"),l=s.n(a);l.a},"5b9a":function(e,t,s){"use strict";var a=s("baaa"),l=s.n(a);l.a},"5e7f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"measurements"},[s("div",{staticClass:"row row-equal"},[s("div",{staticClass:"flex xs12"},[s("va-button",{attrs:{small:"",color:"warning"},on:{click:function(t){return e.refresh()}}},[e._v(" Refresh ")]),s("va-button-toggle",{attrs:{outline:"",options:e.modeOptions,color:"info"},model:{value:e.multiple,callback:function(t){e.multiple=t},expression:"multiple"}})],1)]),s("div",{staticClass:"row row-equal"},[s("div",{staticClass:"flex xs12"},[s("MeasurementsTable",{attrs:{measurements:e.measurements},on:{"expand-msr":e.expandMsr,"delete-msr":e.deleteMsr}})],1)]),s("va-separator"),s("div",{staticClass:"row row-equal"},[s("div",{staticClass:"flex xs12"},[0===e.multiple?s("ResultsTable",{attrs:{rawResults:e.rawResults},on:{"expand-res":e.expandRes,"delete-res":e.deleteRes}}):e._e()],1)]),s("div",{staticClass:"row row-equal"},[s("div",{staticClass:"flex xs12"},[1===e.multiple?s("VisualizeMultiple",{ref:"visMultiple"}):e._e()],1)]),s("va-modal",{attrs:{size:"large",title:e.resultDetailsTitle},model:{value:e.showResultDetails,callback:function(t){e.showResultDetails=t},expression:"showResultDetails"}},[s("pre",[e._v("  "+e._s(e.resultDetails)+"\n")])])],1)},l=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.measurements.length?s("va-card",{attrs:{title:e.title}},[s("table",{staticClass:"va-table va-table--striped va-table--hoverable"},[s("thead",[s("tr",e._l(e.headers,(function(t,a){return s("th",{key:a},[e._v(e._s(t))])})),0)]),s("tbody",e._l(e.measurements,(function(t,a){return s("tr",{key:a},[s("td",[s("va-badge",{attrs:{color:"info"}},[e._v(" "+e._s(t.name)+" ")])],1),s("td",[s("p",[e._v(" "+e._s(t.endpoint)+" ")])]),s("td",[s("p",[e._v(" "+e._s(t.begins)+" ")])]),s("td",[s("p",[e._v(" "+e._s(t.ends)+" ")])]),s("td",[e._v(" "+e._s(t.total)+" ")]),s("td",[s("va-button",{attrs:{small:"",color:"info"},on:{click:function(s){return e.expandMsr(t._id)}}},[e._v(" Expand ")]),s("va-button",{attrs:{small:"",color:"danger"},on:{click:function(s){return e.deleteMsr(t._id)}}},[e._v(" Delete ")])],1)])})),0)])]):e._e()],1)},n=[],o={name:"measurements",props:["measurements"],data:function(){return{headers:["Name","Endpoint","Starts at","Ends at","Total results","Actions"],title:"Stored measurements"}},created:function(){},computed:{},methods:{expandMsr:function(e){this.$emit("expand-msr",e)},deleteMsr:function(e){this.$emit("delete-msr",e)}}},i=o,u=(s("5b9a"),s("2877")),c=Object(u["a"])(i,r,n,!1,null,null,null),d=c.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.rawResults.length?s("div",[s("va-button-toggle",{attrs:{outline:"",options:e.options,color:"info"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),"table"==e.model?s("table",{staticClass:"va-table va-table--striped va-table--hoverable"},[s("thead",[s("tr",e._l(e.table.resultColumns,(function(t,a){return s("th",{key:a},[e._v(e._s(t))])})),0)]),s("tbody",e._l(e.table.resultValues,(function(t,a){return s("tr",{key:a},[e._l(Object.values(t).slice(1),(function(t,a){return s("td",{key:a},[e._v(" "+e._s(t)+" ")])})),s("td",[s("va-button",{attrs:{small:"",color:"info"},on:{click:function(t){return e.detailRes(a)}}},[e._v(" Details ")]),s("va-button",{attrs:{small:"",color:"danger"},on:{click:function(t){return e.deleteRes(a)}}},[e._v(" Delete ")])],1)],2)})),0)]):e._e(),s("div",{staticClass:"chartt"},["graph"==e.model?s("va-chart",{attrs:{data:e.chartData,type:"line"}}):e._e()],1)],1):e._e()},m=[],p={name:"resultsTable",props:["rawResults"],components:{},data:function(){return{options:[{label:"Table",value:"table"},{label:"Graph",value:"graph"}],model:"table",colors:["primary","secondary","danger","warning","dark"],table:{resultColumns:[],resultValues:[]},labels:[],label:"",data:[]}},computed:{chartData:function(){return{labels:this.labels,datasets:this.data}}},created:function(){},mounted:function(){},watch:{rawResults:{handler:function(){this.rawResults.length?this.processResults():this.resetData()},deep:!0}},methods:{detailRes:function(e){var t=this.table.resultValues[e][0];this.$emit("expand-res",t)},deleteRes:function(e){var t=this.table.resultValues[e][0];this.$emit("delete-res",t)},processResults:function(){for(var e=[],t=0;t<this.rawResults.length;t++){var s=[this.rawResults[t]._id,this.rawResults[t].timestamp];s=s.concat(this.rawResults[t].resultValues[0]),e.push(s)}var a=["timestamp"];for(a=a.concat(this.rawResults[0].results),a=a.concat(["Action"]),this.table.resultColumns=a,this.table.resultValues=e,this.data=[],this.labels=[],t=0;t<this.rawResults.length;t++)this.labels.push(this.rawResults[t].timestamp.split(".")[0]);for(t=0;t<this.rawResults[0].results.length;t++){var l=this.rawResults[0].results[t].split(".");if(l[1]){for(var r=[],n=l[0]+" "+this.getUnitLabel(l[1]),o=0;o<this.rawResults.length;o++)r.push(Number(this.rawResults[o].resultValues[0][t]));var i={label:n,backgroundColor:"transparent",borderColor:this.colors[t],data:r};this.data.push(i)}}},getUnitLabel:function(e){switch(e){case"n":return"(#)";case"pc":return"(%)";case"b":return"(Bytes)";default:return""}},resetData:function(){this.table.resultColumns=[],this.table.resultValues=[],this.labels=[],this.label="",this.data=[]}}},f=p,v=(s("b73b"),Object(u["a"])(f,h,m,!1,null,null,null)),b=v.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.graphs,(function(t,a){return s("div",{key:a,staticClass:"chart-row row"},[s("p",{staticClass:"display-4"},[e._v(" ["+e._s(e.operationInfo[a].name)+"] data from ["+e._s(e.operationInfo[a].agent)+"] ")]),s("va-button",{attrs:{small:"",color:"danger"},on:{click:function(t){return e.remove(a)}}},[e._v(" Remove ")]),s("va-chart",{staticClass:"chartt",attrs:{data:t,type:"line"}})],1)})),0)},_=[],w={name:"visualizeMultiple",components:{},data:function(){return{graphs:[],operationInfo:[],colors:["primary","secondary","danger","warning","dark"]}},computed:{},created:function(){},mounted:function(){},methods:{addResult:function(e){for(var t=[],s=[],a=!1,l=0;l<e.length;l++)s.push(e[l].timestamp.split(".")[0]);for(l=0;l<e[0].results.length;l++){var r=e[0].results[l].split(".");if(r[1]){a=!0;for(var n=[],o=r[0]+" "+this.getUnitLabel(r[1]),i=0;i<e.length;i++)n.push(Number(e[i].resultValues[0][l]));var u={label:o,backgroundColor:"transparent",borderColor:this.colors[l],data:n};t.push(u)}}if(a){var c={labels:s,datasets:t};this.operationInfo.push({id:e[0].schema,name:e[0].name,agent:e[0].agentId}),this.graphs.push(c)}},removeResult:function(e){for(var t=-1,s=0;s<this.operationInfo.length;s++)if(this.operationInfo[s].id===e){t=s;break}s>=0&&(this.graphs.splice(t,1),this.operationInfo.splice(t,1))},remove:function(e){this.graphs.splice(e,1),this.operationInfo.splice(e,1)},getUnitLabel:function(e){switch(e){case"n":return"(#)";case"pc":return"(%)";case"b":return"(Bytes)";default:return""}}}},R=w,y=(s("78db"),Object(u["a"])(R,g,_,!1,null,null,null)),k=y.exports,x={name:"measurements",components:{MeasurementsTable:d,ResultsTable:b,VisualizeMultiple:k},data:function(){return{title:"Stored measurements",measurements:[],rawResults:[],lastMeasurement:"",modeOptions:[{label:"Single",value:0},{label:"Multiple",value:1}],multiple:0,resultDetails:{},resultDetailsTitle:"Result details",showResultDetails:!1}},computed:{},created:function(){},mounted:function(){},methods:{refresh:function(){this.measurements=[],this.rawResults=[],this.resultDetails={},this.showResultDetails=!1,this.getAllMeasurements(),""!==this.lastMeasurement&&this.getResultsByOperation(this.lastMeasurement)},getAllMeasurements:function(){this.measurements=[];var e={action:"get_all_opt",params:{result_type:"measure"}},t=this;this.$eventBus.send("nms.storage",e,{},(function(e,s){if(e)console.error("Failed to get measurements",e);else{var a=s.body;if(a.error)console.log("failed to get measurements: ",a.error);else for(var l=a.content.docs,r=0,n=l.length;r<n;r++)t.measurements.push(l[r])}}))},deleteMsr:function(e){var t={action:"del_res_by_opt",params:{operation_id:e}},s=this;this.$eventBus.send("nms.storage",t,{},(function(t,a){if(t)console.error("Failed to delete measurement page",t);else{var l=a.body;l.error&&console.log("failed to delete measurement: ",l.error),s.refresh(),s.showToast("Measurement deleted: "+e,{icon:"fa-check",position:"bottom-right",duration:1500})}}))},expandMsr:function(e){this.lastMeasurement=e,this.getResultsByOperation(e)},getResultsByOperation:function(e){var t=this,s={action:"get_res_by_opt",params:{operation_id:e}};this.$eventBus.send("nms.storage",s,{},(function(e,s){if(e)console.log("Error in getting results");else{var a=s.body;a.error?console.log("Failed to get results: ",a.error):0===t.multiple?t.rawResults=a.content.docs:t.$refs.visMultiple.addResult(a.content.docs)}}))},expandRes:function(e){var t={action:"get_result",params:{_id:e}},s=this;this.$eventBus.send("nms.storage",t,{},(function(e,t){if(e)console.error("Failed to get result details",e);else{var a=t.body;if(a.error)console.log("failed to get result details: ",a.error);else{var l=a.content;s.resultDetails=JSON.stringify(l,null,4),s.showResultDetails=!0}}}))},deleteRes:function(e){var t={action:"del_result",params:{_id:e}},s=this;this.$eventBus.send("nms.storage",t,{},(function(e,t){if(e)console.error("Failed to save page",e);else{var a=t.body;a.error?console.log("failed to delete result: ",a.error):(s.refresh(),s.showToast("Result deleted",{icon:"fa-check",position:"bottom-right",duration:1500}))}}))}},eventbus:{lifecycleHooks:{created:function(e,t){e.getAllMeasurements()}}}},M=x,C=(s("4666"),Object(u["a"])(M,a,l,!1,null,null,null));t["default"]=C.exports},"78db":function(e,t,s){"use strict";var a=s("df9b"),l=s.n(a);l.a},"832d":function(e,t,s){},b73b:function(e,t,s){"use strict";var a=s("09ad"),l=s.n(a);l.a},baaa:function(e,t,s){},df9b:function(e,t,s){}}]);
//# sourceMappingURL=chunk-b95e3e58.f776acdc.js.map