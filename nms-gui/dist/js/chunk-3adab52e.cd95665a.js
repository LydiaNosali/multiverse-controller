(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3adab52e"],{"02ba":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"forceCenter",(function(){return c})),n.d(i,"forceCollide",(function(){return T})),n.d(i,"forceLink",(function(){return q})),n.d(i,"forceManyBody",(function(){return Nt})),n.d(i,"forceRadial",(function(){return St})),n.d(i,"forceSimulation",(function(){return Ct})),n.d(i,"forceX",(function(){return Mt})),n.d(i,"forceY",(function(){return It}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"networking"},[n("div",{staticClass:"row"},[n("div",{staticClass:"flex xs12 lg12"},[n("Topology",{ref:"topology",attrs:{topology:{nodes:t.nodes,links:t.links,linkConns:t.linkConns},prefixes:t.prefixes},on:{action:t.topologyEvent}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"flex xs12 lg6"},[n("Prefix",{attrs:{nodes:t.nodes,prefixes:t.prefixes},on:{action:t.prefixEvent}})],1),n("div",{staticClass:"flex xs12 lg6"},[n("Route",{attrs:{nodes:t.nodes,links:t.links,prefixes:t.prefixes,routes:t.routes},on:{action:t.routeEvent}})],1)])])},s=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("va-card",{attrs:{title:t.title}},[n("subnet-list",{attrs:{data:t.subnets}}),n("va-button-toggle",{attrs:{small:"",outline:"",options:t.kindOptions,color:"success"},model:{value:t.kind,callback:function(e){t.kind=e},expression:"kind"}}),n("div",{staticClass:"topology"},[n("d3-network",{ref:"net",attrs:{"net-nodes":t.graphNodes,"net-links":t.graphLinks,options:t.options},on:{"node-click":t.nodeClick,"link-click":t.linkClick}})],1),n("div",{staticClass:"tools"},[n("ul",[n("li",[n("va-button",{attrs:{color:"info",small:""},on:{click:function(e){return t.setSelectTool()}}},[n("i",{staticClass:"fa fa-mouse-pointer",attrs:{"aria-hidden":"true"}}),t._v(" Select")]),n("va-button",{attrs:{color:"info",small:""},on:{click:function(e){return t.createNodeModal()}}},[n("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}}),t._v(" Create node ")]),n("va-button",{attrs:{color:"info",small:""},on:{click:function(e){return t.createLinkModal()}}},[n("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}}),t._v(" Create link ")])],1)])])],1),n("node-details",{attrs:{node:t.nodeDetails}}),n("link-details",{attrs:{link:t.linkDetails}})],1)},a=[],l=n("0f69"),c=function(t,e){var n;function i(){var i,o,s=n.length,r=0,a=0;for(i=0;i<s;++i)o=n[i],r+=o.x,a+=o.y;for(r=r/s-t,a=a/s-e,i=0;i<s;++i)o=n[i],o.x-=r,o.y-=a}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},d=function(t){return function(){return t}},h=function(){return 1e-6*(Math.random()-.5)},u=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return f(this.cover(e,n),e,n,t)};function f(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var o,s,r,a,l,c,d,h,u,f=t._root,p={data:i},v=t._x0,g=t._y0,m=t._x1,y=t._y1;if(!f)return t._root=p,t;while(f.length)if((c=e>=(s=(v+m)/2))?v=s:m=s,(d=n>=(r=(g+y)/2))?g=r:y=r,o=f,!(f=f[h=d<<1|c]))return o[h]=p,t;if(a=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===a&&n===l)return p.next=f,o?o[h]=p:t._root=p,t;do{o=o?o[h]=new Array(4):t._root=new Array(4),(c=e>=(s=(v+m)/2))?v=s:m=s,(d=n>=(r=(g+y)/2))?g=r:y=r}while((h=d<<1|c)===(u=(l>=r)<<1|a>=s));return o[u]=f,o[h]=p,t}function p(t){var e,n,i,o,s=t.length,r=new Array(s),a=new Array(s),l=1/0,c=1/0,d=-1/0,h=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(r[n]=i,a[n]=o,i<l&&(l=i),i>d&&(d=i),o<c&&(c=o),o>h&&(h=o));if(l>d||c>h)return this;for(this.cover(l,c).cover(d,h),n=0;n<s;++n)f(this,r[n],a[n],t[n]);return this}var v=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,o=this._x1,s=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{var r,a,l=o-n,c=this._root;while(n>t||t>=o||i>e||e>=s)switch(a=(e<i)<<1|t<n,r=new Array(4),r[a]=c,c=r,l*=2,a){case 0:o=n+l,s=i+l;break;case 1:n=o-l,s=i+l;break;case 2:o=n+l,i=s-l;break;case 3:n=o-l,i=s-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=o,this._y1=s,this},g=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},m=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},y=function(t,e,n,i,o){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=o},x=function(t,e,n){var i,o,s,r,a,l,c,d=this._x0,h=this._y0,u=this._x1,f=this._y1,p=[],v=this._root;v&&p.push(new y(v,d,h,u,f)),null==n?n=1/0:(d=t-n,h=e-n,u=t+n,f=e+n,n*=n);while(l=p.pop())if(!(!(v=l.node)||(o=l.x0)>u||(s=l.y0)>f||(r=l.x1)<d||(a=l.y1)<h))if(v.length){var g=(o+r)/2,m=(s+a)/2;p.push(new y(v[3],g,m,r,a),new y(v[2],o,m,g,a),new y(v[1],g,s,r,m),new y(v[0],o,s,g,m)),(c=(e>=m)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var x=t-+this._x.call(null,v.data),w=e-+this._y.call(null,v.data),k=x*x+w*w;if(k<n){var _=Math.sqrt(n=k);d=t-_,h=e-_,u=t+_,f=e+_,i=v.data}}return i},w=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(r=+this._y.call(null,t)))return this;var e,n,i,o,s,r,a,l,c,d,h,u,f=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!f)return this;if(f.length)while(1){if((c=s>=(a=(p+g)/2))?p=a:g=a,(d=r>=(l=(v+m)/2))?v=l:m=l,e=f,!(f=f[h=d<<1|c]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,u=h)}while(f.data!==t)if(i=f,!(f=f.next))return this;return(o=f.next)&&delete f.next,i?(o?i.next=o:delete i.next,this):e?(o?e[h]=o:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[u]=f:this._root=f),this):(this._root=o,this)};function k(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}var _=function(){return this._root},b=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},C=function(t){var e,n,i,o,s,r,a=[],l=this._root;l&&a.push(new y(l,this._x0,this._y0,this._x1,this._y1));while(e=a.pop())if(!t(l=e.node,i=e.x0,o=e.y0,s=e.x1,r=e.y1)&&l.length){var c=(i+s)/2,d=(o+r)/2;(n=l[3])&&a.push(new y(n,c,d,s,r)),(n=l[2])&&a.push(new y(n,i,d,c,r)),(n=l[1])&&a.push(new y(n,c,o,s,d)),(n=l[0])&&a.push(new y(n,i,o,c,d))}return this},N=function(t){var e,n=[],i=[];this._root&&n.push(new y(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var o=e.node;if(o.length){var s,r=e.x0,a=e.y0,l=e.x1,c=e.y1,d=(r+l)/2,h=(a+c)/2;(s=o[0])&&n.push(new y(s,r,a,d,h)),(s=o[1])&&n.push(new y(s,d,a,l,h)),(s=o[2])&&n.push(new y(s,r,h,d,c)),(s=o[3])&&n.push(new y(s,d,h,l,c))}i.push(e)}while(e=i.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this};function S(t){return t[0]}var M=function(t){return arguments.length?(this._x=t,this):this._x};function I(t){return t[1]}var L=function(t){return arguments.length?(this._y=t,this):this._y};function R(t,e,n){var i=new z(null==e?S:e,null==n?I:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function z(t,e,n,i,o,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=o,this._y1=s,this._root=void 0}function A(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var O=R.prototype=z.prototype;function P(t){return t.x+t.vx}function E(t){return t.y+t.vy}O.copy=function(){var t,e,n=new z(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=A(i),n;t=[{source:i,target:n._root=new Array(4)}];while(i=t.pop())for(var o=0;o<4;++o)(e=i.source[o])&&(e.length?t.push({source:e,target:i.target[o]=new Array(4)}):i.target[o]=A(e));return n},O.add=u,O.addAll=p,O.cover=v,O.data=g,O.extent=m,O.find=x,O.remove=w,O.removeAll=k,O.root=_,O.size=b,O.visit=C,O.visitAfter=N,O.x=M,O.y=L;var T=function(t){var e,n,i=1,o=1;function s(){for(var t,s,a,l,c,d,u,f=e.length,p=0;p<o;++p)for(s=R(e,P,E).visitAfter(r),t=0;t<f;++t)a=e[t],d=n[a.index],u=d*d,l=a.x+a.vx,c=a.y+a.vy,s.visit(v);function v(t,e,n,o,s){var r=t.data,f=t.r,p=d+f;if(!r)return e>l+p||o<l-p||n>c+p||s<c-p;if(r.index>a.index){var v=l-r.x-r.vx,g=c-r.y-r.vy,m=v*v+g*g;m<p*p&&(0===v&&(v=h(),m+=v*v),0===g&&(g=h(),m+=g*g),m=(p-(m=Math.sqrt(m)))/m*i,a.vx+=(v*=m)*(p=(f*=f)/(u+f)),a.vy+=(g*=m)*p,r.vx-=v*(p=1-p),r.vy-=g*p)}}}function r(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function a(){if(e){var i,o,s=e.length;for(n=new Array(s),i=0;i<s;++i)o=e[i],n[o.index]=+t(o,i,e)}}return"function"!==typeof t&&(t=d(null==t?1:+t)),s.initialize=function(t){e=t,a()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"===typeof e?e:d(+e),a(),s):t},s},H="$";function $(){}function j(t,e){var n=new $;if(t instanceof $)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,o=-1,s=t.length;if(null==e)while(++o<s)n.set(o,t[o]);else while(++o<s)n.set(e(i=t[o],o,t),i)}else if(t)for(var r in t)n.set(r,t[r]);return n}$.prototype=j.prototype={constructor:$,has:function(t){return H+t in this},get:function(t){return this[H+t]},set:function(t,e){return this[H+t]=e,this},remove:function(t){var e=H+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===H&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===H&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===H&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===H&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===H&&++t;return t},empty:function(){for(var t in this)if(t[0]===H)return!1;return!0},each:function(t){for(var e in this)e[0]===H&&t(this[e],e.slice(1),this)}};var V=j;function F(){}var D=V.prototype;function B(t,e){var n=new F;if(t instanceof F)t.each((function(t){n.add(t)}));else if(t){var i=-1,o=t.length;if(null==e)while(++i<o)n.add(t[i]);else while(++i<o)n.add(e(t[i],i,t))}return n}F.prototype=B.prototype={constructor:F,has:D.has,add:function(t){return t+="",this[H+t]=t,this},remove:D.remove,clear:D.clear,values:D.keys,size:D.size,empty:D.empty,each:D.each};function W(t){return t.index}function U(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var q=function(t){var e,n,i,o,s,r=W,a=u,l=d(30),c=1;function u(t){return 1/Math.min(o[t.source.index],o[t.target.index])}function f(i){for(var o=0,r=t.length;o<c;++o)for(var a,l,d,u,f,p,v,g=0;g<r;++g)a=t[g],l=a.source,d=a.target,u=d.x+d.vx-l.x-l.vx||h(),f=d.y+d.vy-l.y-l.vy||h(),p=Math.sqrt(u*u+f*f),p=(p-n[g])/p*i*e[g],u*=p,f*=p,d.vx-=u*(v=s[g]),d.vy-=f*v,l.vx+=u*(v=1-v),l.vy+=f*v}function p(){if(i){var a,l,c=i.length,d=t.length,h=V(i,r);for(a=0,o=new Array(c);a<d;++a)l=t[a],l.index=a,"object"!==typeof l.source&&(l.source=U(h,l.source)),"object"!==typeof l.target&&(l.target=U(h,l.target)),o[l.source.index]=(o[l.source.index]||0)+1,o[l.target.index]=(o[l.target.index]||0)+1;for(a=0,s=new Array(d);a<d;++a)l=t[a],s[a]=o[l.source.index]/(o[l.source.index]+o[l.target.index]);e=new Array(d),v(),n=new Array(d),g()}}function v(){if(i)for(var n=0,o=t.length;n<o;++n)e[n]=+a(t[n],n,t)}function g(){if(i)for(var e=0,o=t.length;e<o;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t){i=t,p()},f.links=function(e){return arguments.length?(t=e,p(),f):t},f.id=function(t){return arguments.length?(r=t,f):r},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(a="function"===typeof t?t:d(+t),v(),f):a},f.distance=function(t){return arguments.length?(l="function"===typeof t?t:d(+t),g(),f):l},f},X={value:function(){}};function G(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new J(i)}function J(t){this._=t}function Y(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Z(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function Q(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=X,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}J.prototype=G.prototype={constructor:J,on:function(t,e){var n,i=this._,o=Y(t+"",i),s=-1,r=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++s<r)if(n=(t=o[s]).type)i[n]=Q(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Q(i[n],t.name,null);return this}while(++s<r)if((n=(t=o[s]).type)&&(n=Z(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new J(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),s=0;s<n;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],s=0,n=i.length;s<n;++s)i[s].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,s=i.length;o<s;++o)i[o].value.apply(e,n)}};var K,tt,et=G,nt=0,it=0,ot=0,st=1e3,rt=0,at=0,lt=0,ct="object"===typeof performance&&performance.now?performance:Date,dt="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ht(){return at||(dt(ut),at=ct.now()+lt)}function ut(){at=0}function ft(){this._call=this._time=this._next=null}function pt(t,e,n){var i=new ft;return i.restart(t,e,n),i}function vt(){ht(),++nt;var t,e=K;while(e)(t=at-e._time)>=0&&e._call.call(null,t),e=e._next;--nt}function gt(){at=(rt=ct.now())+lt,nt=it=0;try{vt()}finally{nt=0,yt(),at=0}}function mt(){var t=ct.now(),e=t-rt;e>st&&(lt-=e,rt=t)}function yt(){var t,e,n=K,i=1/0;while(n)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:K=e);tt=t,xt(i)}function xt(t){if(!nt){it&&(it=clearTimeout(it));var e=t-at;e>24?(t<1/0&&(it=setTimeout(gt,t-ct.now()-lt)),ot&&(ot=clearInterval(ot))):(ot||(rt=ct.now(),ot=setInterval(mt,st)),nt=1,dt(gt))}}function wt(t){return t.x}function kt(t){return t.y}ft.prototype=pt.prototype={constructor:ft,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?ht():+n)+(null==e?0:+e),this._next||tt===this||(tt?tt._next=this:K=this,tt=this),this._call=t,this._time=n,xt()},stop:function(){this._call&&(this._call=null,this._time=1/0,xt())}};var _t=10,bt=Math.PI*(3-Math.sqrt(5)),Ct=function(t){var e,n=1,i=.001,o=1-Math.pow(i,1/300),s=0,r=.6,a=V(),l=pt(d),c=et("tick","end");function d(){h(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function h(i){var l,c,d=t.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(s-n)*o,a.each((function(t){t(n)})),l=0;l<d;++l)c=t[l],null==c.fx?c.x+=c.vx*=r:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=r:(c.y=c.fy,c.vy=0);return e}function u(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=_t*Math.sqrt(n),s=n*bt;e.x=o*Math.cos(s),e.y=o*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),u(),e={tick:h,restart:function(){return l.restart(d),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,u(),a.each(f),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(o=+t,e):+o},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(r=1-t,e):1-r},force:function(t,n){return arguments.length>1?(null==n?a.remove(t):a.set(t,f(n)),e):a.get(t)},find:function(e,n,i){var o,s,r,a,l,c=0,d=t.length;for(null==i?i=1/0:i*=i,c=0;c<d;++c)a=t[c],o=e-a.x,s=n-a.y,r=o*o+s*s,r<i&&(l=a,i=r);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},Nt=function(){var t,e,n,i,o=d(-30),s=1,r=1/0,a=.81;function l(i){var o,s=t.length,r=R(t,wt,kt).visitAfter(u);for(n=i,o=0;o<s;++o)e=t[o],r.visit(f)}function c(){if(t){var e,n,s=t.length;for(i=new Array(s),e=0;e<s;++e)n=t[e],i[n.index]=+o(n,e,t)}}function u(t){var e,n,o,s,r,a=0,l=0;if(t.length){for(o=s=r=0;r<4;++r)(e=t[r])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,o+=n*e.x,s+=n*e.y);t.x=o/l,t.y=s/l}else{e=t,e.x=e.data.x,e.y=e.data.y;do{a+=i[e.data.index]}while(e=e.next)}t.value=a}function f(t,o,l,c){if(!t.value)return!0;var d=t.x-e.x,u=t.y-e.y,f=c-o,p=d*d+u*u;if(f*f/a<p)return p<r&&(0===d&&(d=h(),p+=d*d),0===u&&(u=h(),p+=u*u),p<s&&(p=Math.sqrt(s*p)),e.vx+=d*t.value*n/p,e.vy+=u*t.value*n/p),!0;if(!(t.length||p>=r)){(t.data!==e||t.next)&&(0===d&&(d=h(),p+=d*d),0===u&&(u=h(),p+=u*u),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(f=i[t.data.index]*n/p,e.vx+=d*f,e.vy+=u*f)}while(t=t.next)}}return l.initialize=function(e){t=e,c()},l.strength=function(t){return arguments.length?(o="function"===typeof t?t:d(+t),c(),l):o},l.distanceMin=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.distanceMax=function(t){return arguments.length?(r=t*t,l):Math.sqrt(r)},l.theta=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l},St=function(t,e,n){var i,o,s,r=d(.1);function a(t){for(var r=0,a=i.length;r<a;++r){var l=i[r],c=l.x-e||1e-6,d=l.y-n||1e-6,h=Math.sqrt(c*c+d*d),u=(s[r]-h)*o[r]*t/h;l.vx+=c*u,l.vy+=d*u}}function l(){if(i){var e,n=i.length;for(o=new Array(n),s=new Array(n),e=0;e<n;++e)s[e]=+t(i[e],e,i),o[e]=isNaN(s[e])?0:+r(i[e],e,i)}}return"function"!==typeof t&&(t=d(+t)),null==e&&(e=0),null==n&&(n=0),a.initialize=function(t){i=t,l()},a.strength=function(t){return arguments.length?(r="function"===typeof t?t:d(+t),l(),a):r},a.radius=function(e){return arguments.length?(t="function"===typeof e?e:d(+e),l(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(n=+t,a):n},a},Mt=function(t){var e,n,i,o=d(.1);function s(t){for(var o,s=0,r=e.length;s<r;++s)o=e[s],o.vx+=(i[s]-o.x)*n[s]*t}function r(){if(e){var s,r=e.length;for(n=new Array(r),i=new Array(r),s=0;s<r;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+o(e[s],s,e)}}return"function"!==typeof t&&(t=d(null==t?0:+t)),s.initialize=function(t){e=t,r()},s.strength=function(t){return arguments.length?(o="function"===typeof t?t:d(+t),r(),s):o},s.x=function(e){return arguments.length?(t="function"===typeof e?e:d(+e),r(),s):t},s},It=function(t){var e,n,i,o=d(.1);function s(t){for(var o,s=0,r=e.length;s<r;++s)o=e[s],o.vy+=(i[s]-o.y)*n[s]*t}function r(){if(e){var s,r=e.length;for(n=new Array(r),i=new Array(r),s=0;s<r;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+o(e[s],s,e)}}return"function"!==typeof t&&(t=d(null==t?0:+t)),s.initialize=function(t){e=t,r()},s.strength=function(t){return arguments.length?(o="function"===typeof t?t:d(+t),r(),s):o},s.y=function(e){return arguments.length?(t="function"===typeof e?e:d(+e),r(),s):t},s},Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{ref:"svg",staticClass:"net-svg",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:t.size.w,height:t.size.h},on:{mouseup:function(e){return t.emit("dragEnd",[e])},"&touchend":function(e){return t.emit("dragEnd",[e])},"&touchstart":function(t){}}},[n("g",{staticClass:"links",attrs:{id:"l-links"}},t._l(t.links,(function(e){return n("path",t._b({class:t.linkClass(e.id),style:t.linkStyle(e),attrs:{d:t.linkPath(e),id:e.id},on:{click:function(n){return t.emit("linkClick",[n,e])},"&touchstart":function(n){return t.emit("linkClick",[n,e])}}},"path",t.linkAttrs(e),!1))})),0),t.noNodes?t._e():n("g",{staticClass:"nodes",attrs:{id:"l-nodes"}},[t._l(t.nodes,(function(e,i){return[t.svgIcon(e)?n("svg",t._b({key:i,class:t.nodeClass(e,["node-svg"]),style:t.nodeStyle(e),attrs:{viewBox:t.svgIcon(e).attrs.viewBox,width:t.getNodeSize(e,"width"),height:t.getNodeSize(e,"height"),x:e.x-t.getNodeSize(e,"width")/2,y:e.y-t.getNodeSize(e,"height")/2,title:e.name},domProps:{innerHTML:t._s(t.svgIcon(e).data)},on:{click:function(n){return t.emit("nodeClick",[n,e])},"&touchend":function(n){return t.emit("nodeClick",[n,e])},mousedown:function(e){return e.preventDefault(),t.emit("dragStart",[e,i])},touchstart:function(e){return e.preventDefault(),t.emit("dragStart",[e,i])}}},"svg",e._svgAttrs,!1)):n("circle",t._b({key:i,class:t.nodeClass(e),style:t.nodeStyle(e),attrs:{r:t.getNodeSize(e)/2,cx:e.x,cy:e.y,title:e.name},on:{click:function(n){return t.emit("nodeClick",[n,e])},"&touchend":function(n){return t.emit("nodeClick",[n,e])},mousedown:function(e){return e.preventDefault(),t.emit("dragStart",[e,i])},touchstart:function(e){return e.preventDefault(),t.emit("dragStart",[e,i])}}},"circle",e._svgAttrs,!1))]}))],2),t.linkLabels?n("g",{staticClass:"labels",attrs:{id:"link-labels"}},t._l(t.links,(function(e){return n("text",{staticClass:"link-label",attrs:{"font-size":t.fontSize}},[n("textPath",{attrs:{"xlink:href":"#"+e.id,startOffset:"50%"}},[t._v(t._s(e.name))])])})),0):t._e(),t.nodeLabels?n("g",{staticClass:"labels",attrs:{id:"node-labels"}},t._l(t.nodes,(function(e){return n("text",{staticClass:"node-label",class:e._labelClass?e._labelClass:"",attrs:{x:e.x+t.getNodeSize(e)/2+t.fontSize/2,y:e.y+t.labelOffset.y,"font-size":t.fontSize,"stroke-width":t.fontSize/8}},[t._v(t._s(e.name))])})),0):t._e()])},Rt=[],zt={NS:"http://www.w3.org/2000/svg",export(t,e){let n=null;if(this.isSvgData(t)){n=t.cloneNode(!0);let i=t.parentNode.querySelectorAll("*"),o={},s=this.getcssRules();for(let t of i){let n=s;e||(n=s.filter(e=>{return t.matches(e.selectorText)}));for(let t of n)o[t.selectorText]=t.cssText}let r=Object.values(o).join("\n");if(r){let t=document.createElementNS(this.NS,"style");t.type="text/css",n.insertBefore(t,n.childNodes[0]),t.innerHTML=r,n.appendChild(t)}}return n},makeCanvas(t,e,n){let i=document.createElement("canvas");i.width=t,i.height=e;let o=i.getContext("2d");return o.fillStyle=n||"white",o.fillRect(0,0,i.width,i.height),i},serialize(t){return(new XMLSerializer).serializeToString(t)},svgToImg(t,e,n){let i=this.serialize(t),o=new Image,s=e.getContext("2d");o.onload=function(){s.drawImage(this,0,0);let t=e.toDataURL("image/png");n(null,t,s)},o.onerror=function(t){n(t)},o.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i)))},save(t){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(this.serialize(t))},getcssRules(){let t=[];for(let e of document.styleSheets){let n=this.readRules(e);for(let e of n)e&&e.cssText&&t.push(e)}return t},readRules(t){try{if(!t.cssRules)return t.rules||[]}catch(e){if("SecurityError"!==e.name)throw e;return[]}return t.cssRules},toDom(t){let e=document.createElement("div");return e.innerHTML=t,e.firstChild||null},toObject(t){if(t){let e={};if(t.attributes)for(let i=t.attributes.length;i>=0;i--){let n=t.attributes[i];n&&(e[n.name]=n.value)}let n=t.innerHTML;if(n)return{attrs:e,data:n}}return null},svgElFromString(t){let e=this.toDom(t);if(this.isSvgData(e))return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e},svgDataToUrl(t,e){if("object"===typeof e)for(let i in e){let n=e[i]?e[i]:"";t.setAttribute(i,n)}let n=this.export(t);return n?this.svgToUrl(this.serialize(n)):null},isSvgData(t){return!!t.firstChild&&"svg"===t.firstChild.parentNode.nodeName},svgToUrl(t){let e=new Blob([t],{type:"image/svg+xml"}),n=URL.createObjectURL(e);return n}},At={name:"svg-renderer",props:["size","nodes","noNodes","selected","linksSelected","links","nodeSize","padding","fontSize","strLinks","linkWidth","nodeLabels","linkLabels","labelOffset","nodeSym"],computed:{nodeSvg:function(){return this.nodeSym?zt.toObject(this.nodeSym):null}},methods:{getNodeSize:function(t,e){var n=t._size||this.nodeSize;return e&&(n=t["_"+e]||n),n},svgIcon:function(t){return t.svgObj||this.nodeSvg},emit:function(t,e){this.$emit("action",t,e)},svgScreenShot:function(t,e,n,i){var o=zt.export(this.$refs.svg,i);if(e)t(null,zt.save(o));else{n||(n=this.searchBackground());var s=zt.makeCanvas(this.size.w,this.size.h,n);zt.svgToImg(o,s,(function(e,n){e?t(e):t(null,n)}))}},linkClass:function(t){var e=["link"];return this.linksSelected.hasOwnProperty(t)&&e.push("selected"),this.strLinks||e.push("curve"),e},linkPath:function(t){var e={M:[0|t.source.x,0|t.source.y],X:[0|t.target.x,0|t.target.y]};return this.strLinks?"M "+e.M.join(" ")+" L"+e.X.join(" "):(e.Q=[t.source.x,t.target.y],"M "+e.M+" Q "+e.Q.join(" ")+" "+e.X)},nodeStyle:function(t){return t._color?"fill: "+t._color:""},linkStyle:function(t){var e={};return t._color&&(e.stroke=t._color),e},nodeClass:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t._cssClass?t._cssClass:[];return Array.isArray(n)||(n=[n]),n.push("node"),e.forEach((function(t){return n.push(t)})),this.selected[t.id]&&n.push("selected"),(t.fx||t.fy)&&n.push("pinned"),n},searchBackground:function(){var t=this;while(t.$parent){var e=window.getComputedStyle(t.$el),n=e.getPropertyValue("background-color"),i=n.replace(/[^\d,]/g,"").split(","),o=i.reduce((function(t,e){return parseInt(t)+parseInt(e)}),0);if(o>0)return n;t=t.$parent}return"white"},spriteSymbol:function(){var t=this.nodeSym;if(t)return zt.toSymbol(t)},linkAttrs:function(t){var e=t._svgAttrs||{};return e["stroke-width"]=e["stroke-width"]||this.linkWidth,e}}},Ot=At,Pt=n("2877"),Et=Object(Pt["a"])(Ot,Lt,Rt,!1,null,null,null),Tt=Et.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{directives:[{name:"render-canvas",rawName:"v-render-canvas",value:{links:t.links,nodes:t.nodes},expression:"{links, nodes}"}],ref:"canvas",style:t.canvasStyle,attrs:{id:"canvas",width:t.size.w,height:t.size.h},on:{mouseup:function(e){return e.preventDefault(),t.canvasClick(e)},mousedown:function(e){return e.preventDefault(),t.canvasClick(e)},touchstart:function(e){return e.preventDefault(),t.canvasClick(e)},"&touchend":function(e){return t.canvasClick(e)}}})},$t=[],jt={background:{_cssClass:"net-svg",fillStyle:"white"},node:{_cssClass:"node",fillStyle:"green",strokeStyle:"orange",lineWidth:2},link:{_cssClass:"link",strokeStyle:"blue",lineWidth:1},labels:{_cssClass:"node-label",_svgElement:"text",fillStyle:"black",fontFamily:"Arial"},nodeSelected:{_cssClass:"node selected",fillStyle:"red",strokeStyle:"orange",lineWidth:2},linkSelected:{_cssClass:"link selected",strokeStyle:"green",lineWidth:2},nodePinned:{_cssClass:"node pinned",fillStyle:"green",strokeStyle:"red"},nodeSelectedPinned:{_cssClass:"node selected pinned",fillStyle:"green",strokeStyle:"red"}},Vt={randomId(){return Math.random().toString(36).substring(7)},fillStyle(t,e){let n=null,i="picker-"+this.randomId(),o=this.canvasPicker(t,i);e.appendChild(o);let s={fillStyle:"fill",strokeStyle:"stroke",lineWidth:"stroke-width",fontFamily:"font-family"};return t=this.mapStyle(i,s,t,n),e.removeChild(o),t},mapStyle(t,e,n,i,o){let s=window.getComputedStyle(document.getElementById(t),i);o=o||["lineWidth"];for(let r in e){let t=s.getPropertyValue(e[r]);o.indexOf(r)>-1&&(t=parseInt(t,10)),t&&(n[r]=t)}return n},canvasPicker(t,e){let n=t._svgAttrs||{},i=t._svgElement||"circle";if(!t._svgAttrs)switch(i){case"text":n={x:10,y:10,fontSize:20};break;case"circle":n={cx:10,cy:10,r:10};break}return n.class=t._cssClass,n.id=e,this.svgCreate(i,n)},compColor(t){let e=document.createElement("div");e.style.backgroundColor=t,document.body.appendChild(e);let n=window.getComputedStyle(e,null).getPropertyValue("background-color");return document.body.removeChild(e),n},svgCreate(t,e){let n=document.createElementNS("http://www.w3.org/2000/svg",t);for(let i in e)n.setAttributeNS(null,i,e[i]);return n},create(t,e,n){n=n||"body";let i=document.createElement(t),o=e||"";return o+=this.randomId(),i.setAttribute("id",o),document[n].appendChild(i),i}},Ft={name:"canvas-renderer",props:["size","offset","padding","nodes","selected","linksSelected","links","nodeSize","fontSize","strLinks","linkWidth","nodeLabels","labelOffset","canvasStyles","nodeSym","noNodes"],data:function(){return{hitCanvas:null,shapes:{},drag:null,stylesReady:!1,CssStyles:!0,styles:jt,sprites:{}}},computed:{nodeSvg:function(){return this.nodeSym},canvasStyle:function(){var t=this.padding.x+"px",e=this.padding.y+"px";return{left:t,top:e}}},directives:{renderCanvas:function(t,e,n){var i=e.value.nodes,o=e.value.links;n.context.draw(i,o,t)}},created:function(){if(this.canvasStyles)for(var t in this.canvasStyles)this.styles[t]=this.canvasStyles[t]},mounted:function(){var t=this;this.$nextTick((function(){t.hitCanvas.width=t.size.w,t.hitCanvas.height=t.size.h}))},watch:{nodeSize:function(){this.resetSprites()},canvasStyles:function(){this.resetSprites()}},methods:{canvasScreenShot:function(t,e){var n=this.$refs.canvas,i=document.createElement("canvas");i.width=n.width,i.height=n.height;var o=this.styles.background;e&&(o=this.getCssColor(e));var s=i.getContext("2d");s=this.setCtx(s,o),s.fillRect(0,0,i.width,i.height),s.drawImage(n,0,0);var r=i.toDataURL("image/png");r?t(null,r):t(new Error("error generating canvas image"))},emit:function(t,e){this.$emit("action",t,e)},canvasInit:function(){var t=document.createElement("canvas");t.width=this.size.w,t.height=this.size.h,t.top=this.offset.y,t.left=this.offset.x,t.id="hit-canvas",this.hitCanvas=t,this.resetSprites()},resetSprites:function(){this.sprites={};for(var t=["node","nodeSelected","nodePinned","nodeSelectedPinned"],e=0,n=t;e<n.length;e++){var i=n[e];this.sprites[i]=this.nodeSprite(this.styles[i])}},canvasClick:function(t){var e=this.hitCanvas.getContext("2d"),n=t.touches?t.touches[0]||t.changedTouches[0]:t,i=document.body.scrollTop,o=document.body.scrollLeft,s=n.clientX+o-this.padding.x,r=n.clientY+i-this.padding.y,a=e.getImageData(s,r,1,1).data,l="rgb(".concat(a[0],",").concat(a[1],",").concat(a[2],")"),c=this.shapes[l];if(c){var d=c.type+"s",h=this[d][c.index];h&&("mouseup"===t.type||"touchend"===t.type?(this.drag&&(this.drag=null,this.emit("dragEnd")),this.emit(c.type+"Click",[t,h])):"mousedown"!==t.type&&"touchstart"!==t.type||(this.drag=h,this.emit("dragStart",[t,h.index])))}},drawNode:function(t,e){t.beginPath(),t.arc(e.x,e.y,this.nodeSize/2,0,2*Math.PI,!1);var n=t.fillStyle,i=t.strokeStyle;e._color&&(t.fillStyle=e._color),e._borderColor&&(t.strokeStyle=e._borderColor),t.fill(),t.stroke(),t.closePath(),t.fillStyle=n,t.strokeStyle=i},drawLink:function(t,e){t.beginPath(),t.moveTo(e.source.x,e.source.y),t.lineTo(e.target.x,e.target.y),t.lineWidth=this.linkWidth,t.strokeStyle=e._color?e._color:e.color,t.stroke()},drawText:function(t,e,n,i){e=this.setCtx(e,n),this.fontSize&&(e.font=this.fontSize+"px "+n.fontFamily);var o=i?t[i]:t.name,s=t.x+this.labelOffset.x,r=t.y+this.labelOffset.y;e.fillText(o,s,r)},draw:function(t,e,n){this.hitCanvas||this.canvasInit();var i=n.getContext("2d"),o=this.hitCanvas.getContext("2d");!this.stylesReady&&this.CssStyles&&(this.getCssStyles(),this.resetSprites()),i.clearRect(0,0,this.size.w,this.size.h),i=this.setCtx(i,this.styles.link);var s=!0,r=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;this.linksSelected[d.id]||this.drawLink(i,d),this.mapShape(d,"link",this.drawLink,o)}}catch(b){r=!0,a=b}finally{try{s||null==c.return||c.return()}finally{if(r)throw a}}for(var h in i=this.setCtx(i,this.styles.linkSelected),this.linksSelected){var u=this.linksSelected[h];this.isOnView(u.source)&&this.isOnView(u.target)&&this.drawLink(i,u)}i=this.setCtx(i,this.styles.node);var f=!0,p=!1,v=void 0;try{for(var g,m=t[Symbol.iterator]();!(f=(g=m.next()).done);f=!0){var y=g.value;if(this.isOnView(y)){if(!this.noNodes){var x=this.getNodeSprite(y);i.drawImage(x,y.x-x.width/2,y.y-x.height/2),this.mapShape(y,"node",this.drawNode,o)}this.nodeLabels&&(y.size=this.nodeSize,this.drawText(y,i,this.labelStyle(y)))}}}catch(b){p=!0,v=b}finally{try{f||null==m.return||m.return()}finally{if(p)throw v}}for(var w in i=this.setCtx(i,this.styles.nodeSelected),this.selected){var k=this.selected[w];if(this.isOnView(k)){var _=this.getNodeSprite(k);i.drawImage(_,k.x-_.width/2,k.y-_.height/2)}}},getNodeSprite:function(t){var e=this.nodeSpriteName(t),n=this.sprites[e];if(!n){var i=this.loadNodeStyle(t);n=this.nodeSprite(i),this.sprites[e]=n}return n},nodeSpriteName:function(t){var e="node";return this.selected[t.id]&&(e+="Selected"),t.pinned&&(e+="Pinned"),t._cssClass&&(e+="-"+t._cssClass),t._color&&(e+="-"+Vt.compColor(t._color)),e},nodeSprite:function(t){var e=this.nodeSize+this.styles.node.lineWidth,n=this.nodeSvg?e:2*e,i=this.spriteCanvas(n),o=i.getContext("2d");if(this.nodeSvg){var s={width:e,height:e,class:t._cssClass||"",style:t._cssStyle||""},r=zt.svgDataToUrl(this.nodeSvg,s);if(r){var a=new Image;a.onload=function(){o.drawImage(a,0,0),URL.revokeObjectURL(r)},a.onerror=function(t){console.log("error creating node image",t)},a.src=r}}else o=this.setCtx(o,t),this.drawNode(o,{x:e,y:e});return i},spriteCanvas:function(t){var e=document.createElement("canvas");return e.width=t,e.height=t,e},isOnView:function(t){return t.x>0&&t.y>0&&t.x<this.size.w&&t.y<this.size.h},mapShape:function(t,e,n,i){t.colorIndex||(t.colorIndex=this.newColorIndex());var o=Object.assign({},t);o.color=t.colorIndex.rgb,o.borderColor=t.colorIndex.rgb,o.type=e;var s=this.sprites[e];s?(s=this.cloneCanvas(s),s=this.fillCanvas(s,t.colorIndex),i.drawImage(s,t.x-s.width/2,t.y-s.height/2)):n(i,o),this.shapes[t.colorIndex.rgb]=o},fillCanvas:function(t,e){for(var n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),o=t.width*t.height*4,s=3;s<=o;s+=4)i.data[s]>0&&(i.data[s]=255,i.data[s-3]=e.r,i.data[s-2]=e.g,i.data[s-1]=e.b);return n.putImageData(i,0,0),t},newColorIndex:function(){while(1){var t=this.randomColor();if(!this.shapes[t.rgb])return t}},randomColor:function(){var t=Math.round(255*Math.random()),e=Math.round(255*Math.random()),n=Math.round(255*Math.random());return{r:t,g:e,b:n,rgb:"rgb(".concat(t,",").concat(e,",").concat(n,")")}},setCtx:function(t,e){for(var n in e)t[n]=e[n];return t},cloneCanvas:function(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),e},Sprite:function(t,e){return this.sprites[t]||(this.sprites[t]=e()),this.sprites[t]},getCssStyles:function(){var t=Vt.create("svg","css-picker");for(var e in this.styles){var n=this.styles[e]||{};n=Vt.fillStyle(n,t)}document.body.removeChild(t),this.stylesReady=!0},loadNodeStyle:function(t){var e="node",n=this.selected[t.id];if(n&&(e="nodeSelected"),t.pinned&&(e="nodePinned"),n&&t.pinned&&(e="nodeSelectedPinned"),t._cssClass){var i=e+"-"+t._cssClass;if(!this.styles[i]){var o=Object.assign({},this.styles[e]||{});o._cssClass=o._cssClass||"",o._cssClass+=" "+t._cssClass,this.updateStyle(i,o)}e=i}var s=Object.assign({},this.styles[e]||this.updateStyle(e));return t._color&&(s.fillStyle=t._color,s._cssStyle="fill:"+t._color),t._cssClass&&(s._cssClass+=" "+t._cssClass),s},updateStyle:function(t,e){e=e||this.styles[t]||{};var n=Vt.create("svg","css-picker");return e=Vt.fillStyle(e,n),this.styles[t]=e,document.body.removeChild(n),e},getCssColor:function(t){var e=Vt.create("div","color-picker"),n=e.id;e.setAttribute("style","background-color:"+t);var i=Vt.mapStyle(n,{fillStyle:"background-color"},[]);return document.body.removeChild(e),i},labelStyle:function(t){var e=this.styles.labels,n=t._labelClass;if(n){var i="labels-"+n,o=this.styles[i];o||(o=Object.assign({},e),o._cssClass+=" "+n,o=this.updateStyle(i,o)),e=o}return e}}},Dt=Ft,Bt=(n("7010"),Object(Pt["a"])(Dt,Ht,$t,!1,null,null,null)),Wt=Bt.exports,Ut={save(t,e){t&&(t=this.dataURIToBlob(t,t=>{let n=URL.createObjectURL(t);this.download(n,e)}))},dataURIToBlob(t,e){let n=atob(t.split(",")[1]),i=n.length,o=new Uint8Array(i);for(var s=0;s<i;s++)o[s]=n.charCodeAt(s);e(new Blob([o]))},download(t,e){e=e||"";let n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e);let i=document.body.appendChild(n);n.click(),document.body.removeChild(i)}};function qt(t){return Jt(t)||Gt(t)||Xt()}function Xt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Gt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Jt(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var Yt,Zt,Qt=Object.assign({},i),Kt={name:"d3-network",components:{canvasRenderer:Wt,svgRenderer:Tt},props:{netNodes:{type:Array},netLinks:{type:Array},options:{type:Object},nodeSym:{type:String},nodeCb:{type:Function},linkCb:{type:Function},simCb:{type:Function},customForces:{type:Object},selection:{type:Object,default:function(){return{nodes:{},links:{}}}}},data:function(){return{canvas:!1,nodes:[],links:[],size:{w:500,h:500},offset:{x:0,y:0},clientOffset:{x:0,y:0},force:500,forces:{Center:!1,X:.5,Y:.5,ManyBody:!0,Link:!0},noNodes:!1,strLinks:!0,fontSize:10,dragging:!1,linkWidth:1,nodeLabels:!1,linkLabels:!1,nodeSize:5,mouseOfst:{x:0,y:0},padding:{x:0,y:0},simulation:null,nodeSvg:null,resizeListener:!0}},render:function(t){for(var e="svg",n={},i="svg-renderer",o=["size","nodes","links","selected","linksSelected","strLinks","linkWidth","nodeLabels","linkLabels","fontSize","labelOffset","offset","padding","nodeSize","noNodes"],s=0,r=o;s<r.length;s++){var a=r[s];n[a]=this[a]}return n.nodeSym=this.nodeSvg,this.canvas&&(i="canvas-renderer",e="canvas",n.canvasStyles=this.options.canvasStyles),t("div",{attrs:{class:"net"},on:{mousemove:this.move,"&touchmove":this.move}},[t(i,{props:n,ref:e,on:{action:this.methodCall}})])},created:function(){this.updateOptions(this.options),this.buildNodes(this.netNodes),this.links=this.buildLinks(this.netLinks),this.updateNodeSvg()},mounted:function(){var t=this;this.onResize(),this.$nextTick((function(){t.animate()})),this.resizeListener&&window.addEventListener("resize",this.onResize)},beforeDestroy:function(){this.resizeListener&&window.removeEventListener("resize",this.onResize)},computed:{selected:function(){return this.selection.nodes},linksSelected:function(){return this.selection.links},center:function(){return{x:this.size.w/2+this.size.w/200+this.offset.x,y:this.size.h/2+this.size.h/200+this.offset.y}},labelOffset:function(){return{x:this.nodeSize/2+this.fontSize/2,y:this.fontSize/2}}},watch:{netNodes:function(t){this.buildNodes(t),this.reset()},netLinks:function(t,e){this.links=this.buildLinks(t),this.reset()},nodeSym:function(){this.updateNodeSvg()},options:function(t,e){this.updateOptions(t),e.size&&t.size&&(e.size.w===t.size.w&&e.size.h===t.size.h||this.onResize()),this.animate()}},methods:{updateNodeSvg:function(){var t=null;this.nodeSym&&(t=zt.svgElFromString(this.nodeSym)),this.nodeSvg=t},methodCall:function(t,e){var n=this[t];n&&"function"===typeof n&&(e?n.apply(void 0,qt(e)):n())},onResize:function(){var t=this.options.size;t&&t.w||(this.size.w=this.$el.clientWidth),t&&t.h||(this.size.h=this.$el.clientHeight),this.padding.x=0,this.padding.y=0;var e=this;while(e.$parent)this.padding.x+=e.$el.offsetLeft||0,this.padding.y+=e.$el.offsetTop||0,e=e.$parent;this.animate()},updateOptions:function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},buildNodes:function(t){var e=this,n=this;this.nodes=t.map((function(t,i){return t=e.itemCb(e.nodeCb,t),t.id||0===t.id||n.$set(t,"id",i),t.x||n.$set(t,"x",0),t.y||n.$set(t,"y",0),t.name||"0"===t.name||n.$set(t,"name","node "+t.id),t.svgSym&&(t.svgIcon=zt.svgElFromString(t.svgSym),e.canvas||!t.svgIcon||t.svgObj||(t.svgObj=zt.toObject(t.svgIcon))),t}))},buildLinks:function(t){var e=this,n=this;return t.concat().map((function(t,i){return t=e.itemCb(e.linkCb,t),t.source=t.sid,t.target=t.tid,t.id||n.$set(t,"id","link-"+i),t}))},itemCb:function(t,e){return t&&"function"===typeof t&&(e=t(e)),e},simulate:function(t,e){var n=this.forces,i=Qt.forceSimulation().stop().alpha(.5).nodes(t);return!1!==n.Center&&i.force("center",Qt.forceCenter(this.center.x,this.center.y)),!1!==n.X&&i.force("X",Qt.forceX(this.center.x).strength(n.X)),!1!==n.Y&&i.force("Y",Qt.forceY(this.center.y).strength(n.Y)),!1!==n.ManyBody&&i.force("charge",Qt.forceManyBody().strength(-this.force)),!1!==n.Link&&i.force("link",Qt.forceLink(e).id((function(t){return t.id}))),i=this.setCustomForces(i),i=this.itemCb(this.simCb,i),i},setCustomForces:function(t){var e=this.customForces;if(e)for(var n in e){var i=this.getD3Func("force"+n);if(i){var o=e[n];t.force("custom"+n,i.apply(void 0,qt(o)))}}return t},getD3Func:function(t){var e=Qt[t];return e&&"function"===typeof e?e:null},animate:function(){this.simulation&&this.simulation.stop(),!1!==this.forces.Link?this.simulation=this.simulate(this.nodes,this.links):this.simulation=this.simulate(this.nodes),this.simulation.restart()},reset:function(){this.animate(),this.nodes=this.simulation.nodes(),this.forces.links&&(this.links=this.simulation.force("link").links())},move:function(t){var e=this.clientPos(t);!1!==this.dragging&&this.nodes[this.dragging]&&(this.simulation.restart(),this.simulation.alpha(.5),this.nodes[this.dragging].fx=e.x-this.mouseOfst.x,this.nodes[this.dragging].fy=e.y-this.mouseOfst.y)},clientPos:function(t){var e=t.touches?t.touches[0].clientX:t.clientX,n=t.touches?t.touches[0].clientY:t.clientY;return e=e||0,n=n||0,{x:e,y:n}},dragStart:function(t,e){this.dragging=!1!==e&&e,this.setMouseOffset(t,this.nodes[e]),!1===this.dragging&&(this.simulation.alpha(.1),this.simulation.restart(),this.setMouseOffset())},dragEnd:function(){var t=this.nodes[this.dragging];t&&!t.pinned&&(t.fx=null,t.fy=null),this.dragStart(!1)},nodeClick:function(t,e){this.$emit("node-click",t,e)},linkClick:function(t,e){this.$emit("link-click",t,e)},setMouseOffset:function(t,e){var n=0,i=0;if(t&&e){var o=this.clientPos(t);n=o.x?o.x-e.x:e.x,i=o.y?o.y-e.y:e.y}this.mouseOfst={x:n,y:i}},screenShot:function(t,e,n,i){var o,s=this,r=[];this.canvas?(n=!1,o=this.$refs.canvas.canvasScreenShot,r=[e]):(o=this.$refs.svg.svgScreenShot,r=[n,e,i]),n&&(t=t||"export.svg"),o.apply(void 0,[function(e,i){e||(n?Ut.download(i,t):Ut.save(i,t)),s.$emit("screen-shot",e)}].concat(qt(r)))}}},te=Kt,ee=(n("b272"),Object(Pt["a"])(te,Yt,Zt,!1,null,null,null)),ne=ee.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("va-list",{attrs:{fit:""}},[n("va-list-label",[t._v(" "+t._s(t.title)+" ")]),n("va-item",[n("va-item-section",{attrs:{side:""}},[n("va-icon",{attrs:{name:"fa fa-exchange",color:"red"}})],1),n("va-item-section",[n("va-item-label",[t._v(t._s(t.data.test))])],1),n("va-item-section",[n("va-badge",{attrs:{color:"primary"}},[t._v(t._s(t.data.test))])],1)],1)],1)},oe=[],se={name:"SubnetList",props:["data"],data:function(){return{title:"Subnets"}},mounted:function(){},methods:{}},re=se,ae=Object(Pt["a"])(re,ie,oe,!1,null,"51717b1a",null),le=ae.exports,ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("va-modal",{attrs:{size:"large",title:"Link details",hideDefaultActions:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"modal-link"},[n("div",{staticClass:"row"},[n("d3-network",{ref:"net",attrs:{"net-nodes":t.graphNodes,"net-links":t.graphLinks,options:t.options}})],1),n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"flex xs6 offset--xs6"},[n("va-button",{attrs:{small:"",color:"danger"},on:{click:function(e){return t.cancelModal()}}},[t._v(" Close ")]),n("va-button",{attrs:{small:""},on:{click:function(e){return t.deleteNode()}}},[t._v(" Delete ")])],1)])])])},de=[],he={name:"link-details",props:["link"],components:{D3Network:ne},data:function(){return{graphNodes:[],graphLinks:[],show:!1}},created:function(){},computed:{options:function(){return{force:5e3,size:{w:500,h:500},nodeSize:40,nodeLabels:!0,linkLabels:!1,canvas:!1,linkWidth:3,fontSize:18}}},watch:{link:{handler:function(){"undefined"!==this.link._id&&(this.show=this.processGraph())}}},methods:{cancelModal:function(){console.log("cancel modal"),this.show=!1},deleteLink:function(t){console.log("delete link: ",t),this.$emit("action","delete-link",[t])},processGraph:function(){console.log(this.link),this.graphNodes=[],this.graphLinks=[];var t={id:this.link.sourceNode,name:this.link.sourceNode},e={id:this.link.sourceLtp,name:this.link.sourceLtp},n={id:this.link.destNode,name:this.link.destNode},i={id:this.link.destLtp,name:this.link.destLtp};this.graphNodes.push(t),this.graphNodes.push(e),this.graphNodes.push(n),this.graphNodes.push(i);var o={sid:this.link.sourceNode,tid:this.link.destNode},s={sid:this.link.sourceLtp,tid:this.link.sourceNode},r={sid:this.link.destLtp,tid:this.link.destNode};if(this.graphLinks.push(o),this.graphLinks.push(s),this.graphLinks.push(r),console.log(this.link.sourceCtp),this.link.sourceCtp){var a={id:this.link.sourceCtp,name:this.link.sourceCtp},l={id:this.link.destCtp,name:this.link.destCtp};this.graphNodes.push(a),this.graphNodes.push(l);var c={sid:this.link.sourceCtp,tid:this.link.sourceLtp},d={sid:l.id,tid:i.id};this.graphLinks.push(c),this.graphLinks.push(d)}return!0},getStatusColor:function(t){return"pending"===t?"danger":"success"}}},ue=he,fe=Object(Pt["a"])(ue,ce,de,!1,null,null,null),pe=fe.exports,ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("va-modal",{attrs:{size:"large",title:"Node details",hideDefaultActions:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"modal-node"},[n("div",{staticClass:"row"},[n("d3-network",{ref:"net",attrs:{"net-nodes":t.graphNodes,"net-links":t.graphLinks,options:t.options}})],1),n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"flex xs6 offset--xs6"},[n("va-button",{attrs:{small:"",color:"danger"},on:{click:function(e){return t.cancelModal()}}},[t._v(" Close ")]),n("va-button",{attrs:{small:""},on:{click:function(e){return t.deleteNode()}}},[t._v(" Delete ")])],1)])])])},ge=[],me={name:"node-details",props:["node"],components:{D3Network:ne},data:function(){return{graphNodes:[],graphLinks:[],show:!1}},created:function(){},computed:{options:function(){return{force:5e3,size:{w:500,h:500},nodeSize:40,nodeLabels:!0,linkLabels:!1,canvas:!1,linkWidth:3,fontSize:18}}},watch:{node:{handler:function(){"undefined"!==this.node._id&&(this.show=this.processGraph())}}},methods:{cancelModal:function(){console.log("cancel modal"),this.show=!1},deleteNode:function(t){console.log("delete node: ",t),this.$emit("action","delete-node",[t])},processGraph:function(){var t=this;this.graphNodes=[],this.graphLinks=[];var e={id:this.node._id,name:this.node._id};return"fwd"===this.node.type?e=Object.assign(e,{svgSym:l.routerIcon,svgIcon:null,svgObj:null}):"switch"===this.node.type&&(e=Object.assign(e,{svgSym:l.switchIcon,svgIcon:null,svgObj:null})),this.graphNodes.push(e),this.node.ltps.forEach((function(e){var n={id:e._id,name:e._id};n=Object.assign(n,{svgSym:l.ltpIcon,svgIcon:null,svgObj:null}),t.graphNodes.push(n);var i={sid:t.node._id,tid:e._id};t.graphLinks.push(i),e.ctps.forEach((function(n){var i={id:n._id,name:n._id};i=Object.assign(i,{svgSym:l.ctpIcon,svgIcon:null,svgObj:null}),t.graphNodes.push(i);var o={sid:e._id,tid:n._id};t.graphLinks.push(o)}))})),!0},getStatusColor:function(t){return"pending"===t?"danger":"success"}}},ye=me,xe=Object(Pt["a"])(ye,ve,ge,!1,null,null,null),we=xe.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[n("d3-network",{ref:"net",attrs:{"net-nodes":t.graphNodes,"net-links":t.graphLinks,options:t.options}})],1)])},_e=[],be={name:"ltp-details",props:["data"],components:{D3Network:ne},data:function(){return{graphNodes:[],graphLinks:[],show:!1}},created:function(){},computed:{options:function(){return{force:5e3,size:{w:500,h:500},nodeSize:40,nodeLabels:!0,linkLabels:!1,canvas:!1,linkWidth:3,fontSize:18}}},methods:{}},Ce=be,Ne=Object(Pt["a"])(Ce,ke,_e,!1,null,null,null),Se=Ne.exports,Me={name:"topology",props:["topology","prefixes"],components:{D3Network:ne,SubnetList:le,LinkDetails:pe,NodeDetails:we,LtpDetails:Se},data:function(){return{title:"Network topology",kindOptions:[{label:"Link",value:"links"},{label:"LinkConn",value:"linkConns"}],kind:"links",graphNodes:[],graphLinks:[],subnets:{test:"hello"},nodeDetails:{},linkDetails:{},showModalNode:!1,nNode:{name:"",agent:"",itfs:"",status:""},showModalLink:!1,nLink:{source:"",target:"",sInterface:"",tInterface:"",status:""},error:""}},created:function(){this.reset()},computed:{options:function(){return{force:6e3,size:{w:1e3,h:500},nodeSize:60,nodeLabels:!0,linkLabels:!1,canvas:!1,linkWidth:3,fontSize:18}}},watch:{kind:{handler:function(){this.processGraph()}},topology:{handler:function(){this.processGraph()},deep:!0},prefixes:{handler:function(){},deep:!0}},methods:{getNode:function(t){var e={action:"get_nodes",params:{node_ids:[t],level:2}},n=this;this.$eventBus.send("nms.topology",e,{},(function(t,e){if(t)console.log("Failed to reach topology service",t),n.showToast("Failed to reach topology service",{icon:"fa-close",position:"top-right",duration:1e4});else{var i=e.body;i.error?(console.error(i.error),n.showToast("Failed to get node details",{icon:"fa-close",position:"top-right",duration:1e4})):n.nodeDetails=i.content.docs[0]}}))},processGraph:function(){var t=this;this.graphNodes=[],this.graphLinks=[],this.topology.nodes.forEach((function(e){var n={id:e._id,name:e._id};"fwd"===e.type?n=Object.assign(n,{svgSym:l.routerIcon,svgIcon:null,svgObj:null}):"switch"===e.type&&(n=Object.assign(n,{svgSym:l.switchIcon,svgIcon:null,svgObj:null})),"operational"===e.status?n._color="green":"pending"===e.status?n._color="#ff5349":n._color="yellow",t.graphNodes.push(n)})),this.topology[this.kind].forEach((function(e){var n={id:e._id,sid:e.sourceNode,tid:e.destNode};"operational"===e.status?n._color="green":"pending"===e.status?n._color="#ff5349":n._color="yellow",t.graphLinks.push(n)}))},processPrefixes:function(){},nodeClick:function(t,e){this.getNode(e.id)},linkClick:function(t,e){this.getLink(e.id)},getLink:function(t){var e="get_linkconn";"links"===this.kind&&(e="get_link");var n={action:e,params:{_id:t}},i=this;this.$eventBus.send("nms.topology",n,{},(function(t,e){if(t)console.log("Failed to reach topology service",t),i.showToast("Failed to reach topology service",{icon:"fa-close",position:"top-right",duration:1e4});else{var n=e.body;n.error?(console.error(n.error),i.showToast("Failed to get link details",{icon:"fa-close",position:"top-right",duration:1e4})):i.linkDetails=n.content}}))},selectionEvent:function(t,e){switch(t){case"close":this.showSelection=!1;break;case"delete-node":this.showSelection=!1,this.removeNode(e[0]);break;case"delete-link":this.showSelection=!1,this.removeLink(e[0]);break;default:break}},createNodeModal:function(){this.nNode={name:"",agent:"",itfs:"",status:""},this.error="",this.showModalNode=!0},addNode:function(){if(""!==this.nNode.name){var t=this.nNode.itfs.split(",");if(0!==t.length){this.nNode.itfs=t;var e={action:"add_node",params:{node:this.nNode}},n=this;this.$eventBus.send("nms.topology",e,{},(function(t,e){if(t)console.log("Failed to reach topology service",t),n.showToast("Failed to reach topology service",{icon:"fa-close",position:"top-right",duration:1e4});else{var i=e.body;i.error?(console.error(i.error),n.showToast("Failed to create node",{icon:"fa-close",position:"top-right",duration:1e4})):n.showToast("Node created",{icon:"fa-check",position:"top-right",duration:1e4})}})),this.showModalNode=!1}else this.error="Interfaces not specified"}else this.error="Node name not specified"},removeNode:function(t){var e={action:"del_node",params:{_id:t}},n=this;this.$eventBus.send("nms.topology",e,{},(function(t,e){if(t)console.log("Failed to reach topology service",t),n.showToast("Failed to reach topology service",{icon:"fa-close",position:"top-right",duration:1e4});else{var i=e.body;i.error?(console.error(i.error),n.showToast("Failed to delete node",{icon:"fa-close",position:"top-right",duration:1e4})):n.showToast("Node deleted",{icon:"fa-check",position:"top-right",duration:1e4})}}))},createLinkModal:function(){this.nLink={source:"",target:"",sourceItf:"",targetItf:""},this.error="",this.showModalLink=!0},addLink:function(){if(""===this.nLink.sourceItf&""===this.nLink.targetItf)this.error="Interfaces not specified";else if(this.nLink.source!==this.nLink.target){var t=this.nodeToIdMap.get(this.nLink.source),e=this.nodeToIdMap.get(this.nLink.target);if(this.findLink(t,e))this.error="Link already exists";else{var n={action:"add_link",params:{source:t,target:e,sourceItf:this.nLink.sourceItf,targetItf:this.nLink.targetItf}},i=this;this.$eventBus.send("nms.topology",n,{},(function(t,e){if(t)console.log("Failed to reach topology service",t),i.showToast("Failed to reach topology service",{icon:"fa-close",position:"top-right",duration:1e4});else{var n=e.body;n.error?(console.error(n.error),i.showToast("Failed to create link",{icon:"fa-close",position:"top-right",duration:1e4})):i.showToast("Link created",{icon:"fa-check",position:"top-right",duration:1e4})}})),this.showModalLink=!1}}else this.error="Source and target must be different"},findLink:function(t,e){var n=!1;return this.topology.links.forEach((function(i){if(i.source===(t||e)&&i.target===(e||t))return n=!0,n})),n},removeLink:function(t){var e={action:"del_link",params:{_id:t}},n=this;this.$eventBus.send("nms.topology",e,{},(function(t,e){if(t)console.log("Failed to reach topology service",t),n.showToast("Failed to reach topology service",{icon:"fa-close",position:"top-right",duration:1e4});else{var i=e.body;i.error?(console.error(i.error),n.showToast("Failed to delete link",{icon:"fa-close",position:"top-right",duration:1e4})):n.showToast("Link deleted",{icon:"fa-check",position:"top-right",duration:1e4})}}))},cancelModal:function(){this.error="",this.showModalNode=!1,this.showModalLink=!1},setSelectTool:function(){},reset:function(){}}},Ie=Me,Le=(n("a870"),Object(Pt["a"])(Ie,r,a,!1,null,null,null)),Re=Le.exports,ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("va-card",{attrs:{title:t.title}},[n("div",{staticClass:"row"},[n("div",{staticClass:"flex xs8 md3"},[n("va-button",{staticStyle:{"max-width":"100%"},attrs:{small:"",color:"info"},on:{click:t.addPrefixModal}},[n("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}}),t._v(" Add prefix ")])],1),n("div",{staticClass:"flex xs12"},[n("table",{staticClass:"va-table va-table--striped va-table--hoverable"},[n("thead",[n("tr",[n("th",[t._v("Prefix")]),n("th",[t._v("Source node")]),n("th",[t._v("Interface")]),n("th",[t._v("Status")]),n("th",[t._v("Action")])])]),n("tbody",t._l(t.prefixes,(function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(t.nodeIdNameMap.get(e.node)))]),n("td",[t._v(t._s(e.interface))]),n("td",[n("va-badge",{attrs:{small:"",color:t.getStatusColor(e.status)}},[t._v(t._s(e.status))])],1),n("td",[n("va-button",{attrs:{small:"",color:"danger"},on:{click:function(n){return t.deletePrefix(e._id)}}},[t._v(" Delete ")])],1)])})),0)])])])]),n("va-modal",{attrs:{size:"large",title:"Register prefix",hideDefaultActions:""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticClass:"modal-prefix"},[n("div",{staticClass:"row"},[""!=t.error?n("va-notification",{attrs:{color:"danger"}},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),n("div",{staticClass:"row"},[n("div",{staticClass:"flex xs12 px-1"},[n("label",{staticClass:"label"},[t._v(" Prefix ")]),n("va-input",{attrs:{placeholder:"e.g., /a/b"},model:{value:t.nPrefix.name,callback:function(e){t.$set(t.nPrefix,"name",e)},expression:"nPrefix.name"}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"flex xs12 px-1"},[n("label",{staticClass:"label"},[t._v("Node")]),n("va-select",{attrs:{label:t.$t("Select the source node"),textBy:"node",options:Array.from(t.nodeNameIdMap.keys())},model:{value:t.nPrefix.node,callback:function(e){t.$set(t.nPrefix,"node",e)},expression:"nPrefix.node"}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"flex xs12 px-1"},[n("label",{staticClass:"label"},[t._v("Interface")]),n("va-select",{attrs:{label:t.$t("Select the source interface"),textBy:"interface",options:t.nodeInterfaces},model:{value:t.nPrefix.interface,callback:function(e){t.$set(t.nPrefix,"interface",e)},expression:"nPrefix.interface"}})],1)]),n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"flex xs6 offset--xs6"},[n("va-button",{attrs:{small:"",color:"danger"},on:{click:t.cancelModal}},[t._v(" Cancel ")]),n("va-button",{attrs:{small:""},on:{click:t.createPrefix}},[t._v(" Submit ")])],1)])])])],1)},Ae=[],Oe={name:"Prefix",props:["nodes","prefixes"],data:function(){return{title:"Registered Prefixes",showModal:!1,nodeNameIdMap:new Map,nodeIdNameMap:new Map,nodeInterfaces:[],nPrefix:{name:"",node:"",interface:"",status:""},error:""}},created:function(){},watch:{nodes:{handler:function(){this.updateNodeMap()},deep:!0},"nPrefix.node":function(t,e){this.nPrefix.interface="",this.getInterfaces(t)}},methods:{updateNodeMap:function(){var t=this;this.nodeNameIdMap.clear(),this.nodeIdNameMap.clear(),this.nodes.forEach((function(e){t.nodeNameIdMap.set(e.name,e._id),t.nodeIdNameMap.set(e._id,e.name)}))},addPrefixModal:function(){this.nPrefix={node:"",interface:"",name:"",status:""},this.error="",this.showModal=!0},createPrefix:function(){if(""!==this.nPrefix.node)if(""!==this.nPrefix.interface)if(""!==this.nPrefix.name){this.nPrefix.node=this.nodeNameIdMap.get(this.nPrefix.node);var t={action:"add_reg_pref",params:this.nPrefix},e=this;this.$eventBus.send("nms.routing",t,{},(function(t,n){if(t)console.log("Failed to reach routing service",t),e.showToast("Failed to reach routing service",{icon:"fa-close",position:"top-right",duration:1e4});else{var i=n.body;i.error?(console.error(i.error),e.showToast("Failed to create prefix",{icon:"fa-close",position:"top-right",duration:1e4})):e.showToast("Prefix created",{icon:"fa-check",position:"top-right",duration:1e4})}})),this.showModal=!1}else this.error="Prefix not specified";else this.error="Interface not specified";else this.error="Node not specified"},cancelModal:function(){this.showModal=!1},deletePrefix:function(t){var e={action:"del_reg_pref",params:{_id:t}},n=this;this.$eventBus.send("nms.routing",e,{},(function(t,e){if(t)console.log("Failed to reach routing service",t),n.showToast("Failed to reach routing service",{icon:"fa-close",position:"top-right",duration:1e4});else{var i=e.body;i.error?(console.error(i.error),n.showToast("Failed to delete prefix",{icon:"fa-close",position:"top-right",duration:1e4})):n.showToast("Prefix deleted",{icon:"fa-check",position:"top-right",duration:1e4})}}))},getInterfaces:function(t){var e=this;this.nodeInterfaces=[];var n=this.nodeNameIdMap.get(t);this.nodes.forEach((function(t){t._id===n&&(e.nodeInterfaces=t.itfs)}))},getStatusColor:function(t){return"pending"===t?"danger":"success"}},computed:{}},Pe=Oe,Ee=(n("49d5"),Object(Pt["a"])(Pe,ze,Ae,!1,null,null,null)),Te=Ee.exports,He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("va-card",{attrs:{title:t.title}},[n("div",{staticClass:"row"},[n("div",{staticClass:"flex xs8 md3"},[n("va-button",{staticStyle:{"max-width":"100%"},attrs:{small:"",color:"info"},on:{click:t.initAddRouteModal}},[n("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}}),t._v(" Add route ")])],1),n("div",{staticClass:"flex xs12 lg12"},[n("table",{staticClass:"va-table va-table--striped va-table--hoverable"},[n("thead",[n("tr",[n("th",[t._v("Prefix")]),n("th",[t._v("Source node")]),n("th",[t._v("From node")]),n("th",[t._v("Path")]),n("th",[t._v("Status")]),n("th",[t._v("Action")])])]),n("tbody",t._l(t.routes,(function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(t.prefixIdNameMap.get(e.prefix)))]),n("td",[t._v(t._s(t.nodeIdNameMap.get(e.targetNode)))]),n("td",[t._v(t._s(t.nodeIdNameMap.get(e.fromNode)))]),n("td",[n("span",[t._v(t._s(t.displayPath(e.path)))])]),n("td",[n("va-badge",{attrs:{small:"",color:t.getStatusColor(e.status)}},[t._v(t._s(e.status))])],1),n("td",[n("va-button",{attrs:{small:"",color:"danger"},on:{click:function(n){return t.deleteRoute(e._id)}}},[t._v(" Delete ")])],1)])})),0)])])])]),n("va-modal",{attrs:{size:"large",title:"Create route",hideDefaultActions:""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticClass:"modal-route"},[""===t.error&&t.nRoute.path.length>0?n("div",{staticClass:"row my-1"},[n("va-chip",{attrs:{color:"info"}},[t._v(" Route from ["+t._s(t.nRoute.fromNode)+"] to ["+t._s(t.correspNode)+"] ")]),n("va-chip",{attrs:{color:"warning"}},[t._v(" Current path: "+t._s(t.displayPath(t.nRoute.path))+" ")])],1):t._e(),n("div",{staticClass:"row my-1"},[""!=t.error?n("va-notification",{attrs:{color:"danger"}},[t._v(" "+t._s(t.error)+" ")]):t._e()],1),n("div",{staticClass:"row px-1"},[n("div",{staticClass:"flex xs12"},[n("d3-network",{ref:"net",attrs:{"net-nodes":t.topology.nodes,"net-links":t.topology.links,options:t.options}})],1)]),t.showNextHop||t.prefixReached?t._e():n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"flex xs6 px-1"},[n("label",{staticClass:"label"},[t._v(" To prefix ")]),n("va-select",{attrs:{label:t.$t("Select prefix"),textBy:"description",options:Array.from(t.prefixNameIdMap.keys())},model:{value:t.nRoute.prefix,callback:function(e){t.$set(t.nRoute,"prefix",e)},expression:"nRoute.prefix"}})],1),n("div",{staticClass:"flex xs6 px-1"},[n("label",{staticClass:"label"},[t._v(" From node ")]),n("va-select",{attrs:{label:t.$t("Select a node"),textBy:"description",options:Array.from(t.nodeNameIdMap.keys())},model:{value:t.nRoute.fromNode,callback:function(e){t.$set(t.nRoute,"fromNode",e)},expression:"nRoute.fromNode"}})],1)]),t.showNextHop||t.prefixReached?t._e():n("div",{staticClass:"row"},[n("div",{staticClass:"flex xs6 px-1"},[n("va-chip",{attrs:{color:"info"}},[t._v(" Source node: "+t._s(t.correspNode)+" ")])],1)]),n("div",{staticClass:"row my-1"},[t.showNextHop?n("div",{staticClass:"flex xs6 offset--xs3"},[n("label",{staticClass:"label"},[t._v(" Next hop ")]),n("va-select",{attrs:{label:t.$t("Select node"),textBy:"description",options:Array.from(t.nextNodesMap.keys())},model:{value:t.selectedNext,callback:function(e){t.selectedNext=e},expression:"selectedNext"}})],1):t._e()]),n("div",{staticClass:"row my-1"},[t.prefixReached?n("va-notification",{attrs:{color:"success"}},[t._v(" "+t._s(t.$t("Prefix reached."))+" ")]):t._e()],1),n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"flex xs8 offset--xs4"},[n("va-button",{attrs:{small:"",color:"danger"},on:{click:t.cancelModal}},[t._v(" Cancel ")]),0==t.nRoute.path.length?n("va-button",{attrs:{small:"",color:"info"},on:{click:t.autoPath}},[t._v(" Automatic path ")]):t._e(),0==t.nRoute.path.length?n("va-button",{attrs:{small:"",color:"warning"},on:{click:t.setPath}},[t._v(" Manual path ")]):t._e(),t.showNextHop?n("va-button",{attrs:{small:"",color:"info"},on:{click:t.nextHop}},[t._v(" Next hop")]):t._e(),t.prefixReached?n("va-button",{attrs:{small:"",color:"success"},on:{click:function(e){return t.createRoute(!1)}}},[t._v(" Submit ")]):t._e()],1)])])])],1)},$e=[],je={name:"route",props:["nodes","links","prefixes","routes"],components:{D3Network:ne},data:function(){return{title:"Routes",showModal:!1,showNextHop:!1,prefixReached:!1,prefixNameIdMap:new Map,prefixIdNameMap:new Map,nodeNameIdMap:new Map,nodeIdNameMap:new Map,nRoute:{fromNode:"",fromNodeId:"",prefix:"",prefixId:"",nop:"",path:[],links:[]},topology:{nodes:[],links:[]},selectedNext:"",nextNodesMap:new Map,visited:[],error:""}},computed:{correspNode:function(){if(""===this.nRoute.prefix)return"undefined";var t=this.prefixNameIdMap.get(this.nRoute.prefix),e=this.nodeOfPrefix(t);return this.nodeIdNameMap.get(e)},options:function(){return{force:2e3,size:{w:500,h:200},nodeSize:20,nodeLabels:!0,linkLabels:!1,canvas:!1,linkWidth:3,fontSize:11}}},created:function(){},watch:{prefixes:{handler:function(){this.updatePrefixMap()},deep:!0},nodes:{handler:function(){this.updateNodeMap()},deep:!0}},methods:{processGraph:function(){var t=this;this.topology.nodes=[],this.topology.links=[],this.nodes.forEach((function(e){var n={id:e._id,name:e.name};t.topology.nodes.push(n)})),this.links.forEach((function(e){var n={id:e._id,sid:e.source,tid:e.target};t.topology.links.push(n)}))},displayPath:function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.nodeIdNameMap.get(t))})),n.join(" > ")},updatePrefixMap:function(){var t=this;this.prefixNameIdMap.clear(),this.prefixIdNameMap.clear(),this.prefixes.forEach((function(e){t.prefixNameIdMap.set(e.name,e._id),t.prefixIdNameMap.set(e._id,e.name)}))},updateNodeMap:function(){var t=this;this.nodeNameIdMap.clear(),this.nodeIdNameMap.clear(),this.nodes.forEach((function(e){t.nodeNameIdMap.set(e.name,e._id),t.nodeIdNameMap.set(e._id,e.name)}))},initAddRouteModal:function(){this.nRoute.fromNode="",this.nRoute.fromNodeId="",this.nRoute.prefix="",this.nRoute.prefixId="",this.nRoute.path=[],this.nRoute.links=[],this.visited=[],this.error="",this.showNextHop=!1,this.prefixReached=!1,this.processGraph(),this.showModal=!0},setPath:function(){if(this.error="",this.nRoute.fromNodeId=this.nodeNameIdMap.get(this.nRoute.fromNode),this.nRoute.prefixId=this.prefixNameIdMap.get(this.nRoute.prefix),this.nRoute.nop=this.nodeOfPrefix(this.nRoute.prefixId),this.nRoute.nop!==this.nRoute.fromNodeId){if(this.nRoute.path.push(this.nRoute.fromNodeId),this.computeNextNodes(this.nRoute.fromNodeId),0===this.nextNodesMap.size)return this.showNextHop=!1,void(this.error="Prefix is not reachable from selected node");if(Array.from(this.nextNodesMap.values()).includes(this.nRoute.nop))return this.nRoute.links.push(this.getLink(this.nRoute.fromNodeId,this.nRoute.nop)),this.nRoute.path.push(this.nRoute.nop),this.prefixReached=!0,void(this.showNextHop=!1);this.visited.push(this.nRoute.fromNodeId),this.selectedNext="",this.showNextHop=!0}else this.error="Selected From node is the source node"},nextHop:function(){this.error="";var t=this.nRoute.path[this.nRoute.path.length-1],e=this.nextNodesMap.get(this.selectedNext);return this.nRoute.links.push(this.getLink(t,e)),this.nRoute.path.push(e),this.visited.push(e),this.computeNextNodes(e),0===this.nextNodesMap.size?(this.showNextHop=!1,void(this.error="Prefix is not reachable from selected node")):Array.from(this.nextNodesMap.values()).includes(this.nRoute.nop)?(this.nRoute.links.push(this.getLink(e,this.nRoute.nop)),this.nRoute.path.push(this.nRoute.nop),this.prefixReached=!0,void(this.showNextHop=!1)):void(this.selectedNext="")},autoPath:function(){this.error="",this.nRoute.fromNodeId=this.nodeNameIdMap.get(this.nRoute.fromNode),this.nRoute.prefixId=this.prefixNameIdMap.get(this.nRoute.prefix),this.nRoute.nop=this.nodeOfPrefix(this.nRoute.prefixId),this.nRoute.nop!==this.nRoute.fromNodeId?this.createRoute(!0):this.error="Source node and From node are the same"},createRoute:function(t){if(""!==this.nRoute.prefixId)if(""!==this.nRoute.fromNode){var e={action:"",params:{prefix:this.nRoute.prefixId,fromNode:this.nRoute.fromNodeId,targetNode:this.nRoute.nop}};if(t)e.action="add_auto_route";else{if(0===this.nRoute.path.length)return void(this.error="Path not specified");e.action="add_route",e.params.path=this.nRoute.path,e.params.links=this.nRoute.links}var n=this;this.$eventBus.send("nms.routing",e,{},(function(t,e){if(t)console.log("Failed to reach routing service",t),n.showToast("Failed to reach routing service",{icon:"fa-close",position:"top-right",duration:1e4});else{var i=e.body;i.error?(console.error(i.error),n.showToast("Operation falied: "+i.error,{icon:"fa-close",position:"top-right",duration:1e4})):n.showToast("Route created",{icon:"fa-check",position:"top-right",duration:1e4})}})),this.showModal=!1,this.cancelModal()}else this.error="From node not specified";else this.error="Prefix not specified"},cancelModal:function(){this.error="",this.nextNodesMap.clear(),this.showModal=!1},deleteRoute:function(t){var e={action:"del_route",params:{_id:t}},n=this;this.$eventBus.send("nms.routing",e,{},(function(t,e){if(t)console.log("Failed to reach routing service",t),n.showToast("Failed to reach routing service",{icon:"fa-close",position:"top-right",duration:1e4});else{var i=e.body;i.error?(console.error(i.error),n.showToast("Failed to delete route",{icon:"fa-close",position:"top-right",duration:1e4})):n.showToast("Route deleted",{icon:"fa-check",position:"top-right",duration:1e4})}}))},nodeOfPrefix:function(t){var e="";return this.prefixes.forEach((function(n){if(n._id===t)return e=n.node,e})),e},computeNextNodes:function(t){var e=this;this.nextNodesMap.clear(),this.links.forEach((function(n){if(n.source===t){if(!e.visited.includes(n.target)){var i=e.nodeIdNameMap.get(n.target);e.nextNodesMap.set(i,n.target)}}else if(n.target===t&&!e.visited.includes(n.source)){var o=e.nodeIdNameMap.get(n.source);e.nextNodesMap.set(o,n.source)}}))},getLink:function(t,e){var n="";return this.links.forEach((function(i){return i.source===t&&i.target===e?(n=i._id,n):i.source===e&&i.target===t?(n=i._id,n):void 0})),n},getStatusColor:function(t){return"pending"===t?"danger":"success"}}},Ve=je,Fe=(n("b9cd"),Object(Pt["a"])(Ve,He,$e,!1,null,null,null)),De=Fe.exports,Be={name:"networking",components:{Topology:Re,Prefix:Te,Route:De},data:function(){return{nodes:[],links:[],linkConns:[],prefixes:[],routes:[]}},created:function(){},methods:{getTopology:function(){var t={action:"get_topology",params:{}},e=this;e.$eventBus.send("nms.topology",t,{},(function(t,n){if(t)console.log("Error in sending message",t);else{var i=n.body;i.content&&(e.nodes=i.content.nodes,e.links=i.content.links,e.linkConns=i.content.linkConns)}}))},getPrefixes:function(){var t={action:"get_all_reg_pref",params:{}},e=this;e.$eventBus.send("nms.routing",t,{},(function(t,n){if(t)console.log("Error in sending message",t);else{var i=n.body;i.content&&(e.prefixes=i.content.docs)}}))},getRoutes:function(){var t={action:"get_all_routes",params:{}},e=this;e.$eventBus.send("nms.routing",t,{},(function(t,n){if(t)console.log("Error in sending message",t);else{var i=n.body;i.content&&(e.routes=i.content.docs)}}))},topologyEvent:function(t,e){console.log(t,e)},prefixEvent:function(t,e){console.log(t,e)},routeEvent:function(t,e){console.log(t,e)}},eventbus:{lifecycleHooks:{created:function(t,e){t.getTopology(),t.getPrefixes(),t.getRoutes(),e.registerHandler("nms.info.topology",(function(e,n){if(e)console.log("VertxEventBus error: ",e);else{var i=n.body.content;JSON.stringify(i)!==JSON.stringify(t.topology)&&(t.nodes=i.nodes,t.links=i.links)}})),e.registerHandler("nms.info.routing.prefixes",(function(e,n){if(e)console.log("VertxEventBus error: ",e);else{var i=n.body.content;JSON.stringify(i)!==JSON.stringify(t.prefixes)&&(t.prefixes=i.docs)}})),e.registerHandler("nms.info.routing.routes",(function(e,n){if(e)console.log("VertxEventBus error: ",e);else{var i=n.body.content;JSON.stringify(i)!==JSON.stringify(t.routes)&&(t.routes=i.docs)}}))}}}},We=Be,Ue=(n("3a91"),Object(Pt["a"])(We,o,s,!1,null,null,null));e["default"]=Ue.exports},"0f69":function(t){t.exports=JSON.parse('{"switchIcon":"<svg style=\\"width:24px;height:24px\\" viewBox=\\"0 0 24 24\\"><path fill=\\"currentColor\\" stroke-width=\\"2%\\" d=\\"M13,18H14A1,1 0 0,1 15,19H22V21H15A1,1 0 0,1 14,22H10A1,1 0 0,1 9,21H2V19H9A1,1 0 0,1 10,18H11V16H8A1,1 0 0,1 7,15V3A1,1 0 0,1 8,2H16A1,1 0 0,1 17,3V15A1,1 0 0,1 16,16H13V18M13,6H14V4H13V6M9,4V6H11V4H9M9,8V10H11V8H9M9,12V14H11V12H9Z\\" /></svg>","faceIcon":"<svg style=\\"width:24px;height:24px\\" viewBox=\\"0 0 24 24\\"><path fill=\\"currentColor\\" stroke-width=\\"2%\\" d=\\"M15,18C11.68,18 9,15.31 9,12C9,8.68 11.68,6 15,6A6,6 0 0,1 21,12A6,6 0 0,1 15,18M4,13A1,1 0 0,1 3,12A1,1 0 0,1 4,11A1,1 0 0,1 5,12A1,1 0 0,1 4,13M22,3H7.63C6.97,3 6.38,3.32 6,3.81L0,12L6,20.18C6.38,20.68 6.97,21 7.63,21H22A2,2 0 0,0 24,19V5C24,3.89 23.1,3 22,3M13,11A1,1 0 0,0 14,10A1,1 0 0,0 13,9A1,1 0 0,0 12,10A1,1 0 0,0 13,11M15,16C16.86,16 18.35,14.72 18.8,13H11.2C11.65,14.72 13.14,16 15,16M17,11A1,1 0 0,0 18,10A1,1 0 0,0 17,9A1,1 0 0,0 16,10A1,1 0 0,0 17,11Z\\" /></svg>","routerIcon":"<svg style=\\"width:24px;height:24px\\" viewBox=\\"0 0 24 24\\"><path fill=\\"currentColor\\" stroke-width=\\"2%\\" d=\\"M12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20M13 13V16H15L12 19L9 16H11V13M5 13H8V15L11 12L8 9V11H5M11 11V8H9L12 5L15 8H13V11M19 11H16V9L13 12L16 15V13H19\\" /></svg>","ltpIcon":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" version=\\"1.1\\" width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\"><path fill=\\"currentColor\\" stroke-width=\\"2%\\" d=\\"M4,1C2.89,1 2,1.89 2,3V7C2,8.11 2.89,9 4,9H1V11H13V9H10C11.11,9 12,8.11 12,7V3C12,1.89 11.11,1 10,1H4M4,3H10V7H4V3M3,13V18L3,20H10V18H5V13H3M14,13C12.89,13 12,13.89 12,15V19C12,20.11 12.89,21 14,21H11V23H23V21H20C21.11,21 22,20.11 22,19V15C22,13.89 21.11,13 20,13H14M14,15H20V19H14V15Z\\" /></svg>","ctpIcon":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" version=\\"1.1\\" width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\"><path fill=\\"currentColor\\" stroke-width=\\"2%\\" d=\\"M15,12C15,10.7 14.16,9.6 13,9.18V6.82C14.16,6.4 15,5.3 15,4A3,3 0 0,0 12,1A3,3 0 0,0 9,4C9,5.3 9.84,6.4 11,6.82V9.19C9.84,9.6 9,10.7 9,12C9,13.3 9.84,14.4 11,14.82V17.18C9.84,17.6 9,18.7 9,20A3,3 0 0,0 12,23A3,3 0 0,0 15,20C15,18.7 14.16,17.6 13,17.18V14.82C14.16,14.4 15,13.3 15,12M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M12,21A1,1 0 0,1 11,20A1,1 0 0,1 12,19A1,1 0 0,1 13,20A1,1 0 0,1 12,21Z\\" /></svg>"}')},"3a91":function(t,e,n){"use strict";var i=n("6367"),o=n.n(i);o.a},"49d5":function(t,e,n){"use strict";var i=n("b1fe"),o=n.n(i);o.a},"5a74":function(t,e,n){},6367:function(t,e,n){},7010:function(t,e,n){"use strict";var i=n("c3a8"),o=n.n(i);o.a},"737d":function(t,e,n){},a870:function(t,e,n){"use strict";var i=n("737d"),o=n.n(i);o.a},b1fe:function(t,e,n){},b272:function(t,e,n){"use strict";var i=n("5a74"),o=n.n(i);o.a},b9cd:function(t,e,n){"use strict";var i=n("e437"),o=n.n(i);o.a},c3a8:function(t,e,n){},e437:function(t,e,n){}}]);
//# sourceMappingURL=chunk-3adab52e.cd95665a.js.map